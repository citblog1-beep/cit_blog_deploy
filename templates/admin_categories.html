{% extends "base.html" %}
{% block title %}๐๏ธ ุฅุฏุงุฑุฉ ุงูุฃูุณุงู{% endblock %}
{% block content %}

<section class="form-section" style="max-width: 900px;">
  <h2>๐๏ธ ุฅุฏุงุฑุฉ ุงูุฃูุณุงู</h2>

  {% if message %}
    <div class="success-message">{{ message }}</div>
  {% endif %}
  {% if error %}
    <div class="success-message" style="background:#ffe8e8; color:#b00020; border-color:#ffb3b3;">
      {{ error }}
    </div>
  {% endif %}

  <form method="POST" class="form-add-post">
    <label>ุงุณู ุงููุณู</label>
    <input type="text" name="name" placeholder="ูุซุงู: ุงูุฐูุงุก ุงูุงุตุทูุงุนู" required>

    <label>ุชุฑุชูุจ ุงูุนุฑุถ (ุงุฎุชูุงุฑู)</label>
    <input type="number" name="sort_order" value="0">

    <button type="submit" class="btn">โ ุฅูุดุงุก ูุณู</button>
  </form>

  <hr style="margin: 25px 0;">

  <h3>ุงููุงุฆูุฉ ุงูุญุงููุฉ</h3>
  {% if categories %}
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th style="text-align:right; padding:8px; border-bottom:1px solid #ddd;">#</th>
          <th style="text-align:right; padding:8px; border-bottom:1px solid #ddd;">ุงูุงุณู</th>
          <th style="text-align:right; padding:8px; border-bottom:1px solid #ddd;">ุงูุฑุงุจุท</th>
          <th style="text-align:right; padding:8px; border-bottom:1px solid #ddd;">ุงููุฌูุฏ</th>
          <th style="text-align:right; padding:8px; border-bottom:1px solid #ddd;">ุชุญูู</th>
        </tr>
      </thead>
      <tbody>
        {% for c in categories %}
        <tr>
          <td style="padding:8px; border-bottom:1px solid #eee;">{{ c.id }}</td>
          <td style="padding:8px; border-bottom:1px solid #eee;">{{ c.name }}</td>
          <td style="padding:8px; border-bottom:1px solid #eee;">
            <code>/{{ c.slug }}</code>
          </td>
          <td style="padding:8px; border-bottom:1px solid #eee;">
            <code>{{ c.folder }}</code>
          </td>
          <td style="padding:8px; border-bottom:1px solid #eee;">
            <form method="POST" action="{{ url_for('delete_category', cat_id=c.id) }}" onsubmit="return confirm('ุญุฐู ุงููุณู {{ c.name }}ุ');" style="display:inline;">
              <button class="btn" style="background:#dc3545;">ุญุฐู</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>ูุง ุชูุฌุฏ ุฃูุณุงู ุญุชู ุงูุขู.</p>
  {% endif %}
</section>

{% endblock %}
